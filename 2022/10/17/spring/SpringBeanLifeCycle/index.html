

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="baymax55">
  <meta name="keywords" content="">
  
    <meta name="description" content="SpringBeanLifeCycle">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBeanLifeCycle">
<meta property="og:url" content="https://baymax55.github.io/2022/10/17/spring/SpringBeanLifeCycle/index.html">
<meta property="og:site_name" content="Baymax55&#39;s Blog">
<meta property="og:description" content="SpringBeanLifeCycle">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://baymax55.github.io/img/index_img/spring.png">
<meta property="article:published_time" content="2022-10-17T03:32:10.147Z">
<meta property="article:modified_time" content="2022-10-17T03:43:56.892Z">
<meta property="article:author" content="baymax55">
<meta property="article:tag" content="spring">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://baymax55.github.io/img/index_img/spring.png">
  
  
  
  <title>SpringBeanLifeCycle - Baymax55&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"baymax55.github.io","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"eHrEoB5dKeqkOQe92av9bqEs-MdYXbMMI","app_key":"ldBS29kjWy4gjD9MCWKAWxyi","server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Baymax55's Blog" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>baymax55</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="SpringBeanLifeCycle"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-10-17 11:32" pubdate>
          2022年10月17日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          18k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          152 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">SpringBeanLifeCycle</h1>
            
              <p class="note note-info">
                
                  
                    本文最后更新于：2022年10月17日 中午
                  
                
              </p>
            
            <div class="markdown-body">
              
              <p>Today we will look into Spring Bean Life Cycle. <strong>Spring Beans</strong> are the most important part of any Spring application. Spring <strong>ApplicationContext</strong> is responsible to initialize the Spring Beans defined in spring bean configuration file.</p>
<h2 id="Spring-Bean-Life-Cycle"><a href="#Spring-Bean-Life-Cycle" class="headerlink" title="Spring Bean Life Cycle"></a>Spring Bean Life Cycle</h2><p><a target="_blank" rel="noopener" href="https://journaldev.nyc3.digitaloceanspaces.com/2014/04/spring-bean-life-cycle.jpg"><img src="https://journaldev.nyc3.digitaloceanspaces.com/2014/04/spring-bean-life-cycle.jpg" srcset="/img/loading.gif" lazyload alt="spring bean life cycle"></a> </p>
<p>Spring Context is also responsible for <strong>injection dependencies</strong> in the bean, either through setter or constructor methods or by <strong>spring autowiring</strong>. Sometimes we want to initialize resources in the bean classes, for example creating database connections or validating third party services at the time of initialization before any client request. Spring framework provide different ways through which we can provide post-initialization and pre-destroy methods in a spring bean life cycle.</p>
<ol>
<li> By implementing <strong>InitializingBean</strong> and <strong>DisposableBean</strong> interfaces - Both these interfaces declare a single method where we can initialize/close resources in the bean. For post-initialization, we can implement <code>InitializingBean</code> interface and provide implementation of <code>afterPropertiesSet()</code> method. For pre-destroy, we can implement <code>DisposableBean</code> interface and provide implementation of <code>destroy()</code> method. These methods are the callback methods and similar to servlet listener implementations. This approach is simple to use but it’s not recommended because it will create tight coupling with the Spring framework in our bean implementations.</li>
<li> Providing <strong>init-method</strong> and <strong>destroy-method</strong> attribute values for the bean in the spring bean configuration file. This is the recommended approach because of no direct dependency to spring framework and we can create our own methods.</li>
</ol>
<p>Note that both <em>post-init</em> and <em>pre-destroy</em> methods should have no arguments but they can throw Exceptions. We would also require to get the bean instance from the spring application context for these methods invocation.</p>
<h3 id="PostConstruct-PreDestroy-Annotations"><a href="#PostConstruct-PreDestroy-Annotations" class="headerlink" title="@PostConstruct, @PreDestroy Annotations"></a>@PostConstruct, @PreDestroy Annotations</h3><p>Spring framework also support <code>@PostConstruct</code> and <code>@PreDestroy</code> annotations for defining post-init and pre-destroy methods. These annotations are part of <code>javax.annotation</code> package. However for these annotations to work, we need to configure our spring application to look for annotations. We can do this either by defining bean of type <code>org.springframework.context.annotation.CommonAnnotationBeanPostProcessor</code> or by <code>context:annotation-config</code> element in spring bean configuration file. Let’s write a simple Spring application to showcase the use of above configurations for spring bean life cycle management. Create a Spring Maven project in Spring Tool Suite, final project will look like below image. <a target="_blank" rel="noopener" href="https://journaldev.nyc3.digitaloceanspaces.com/2014/04/spring-bean-life-cycle-project.png"><img src="https://journaldev.nyc3.digitaloceanspaces.com/2014/04/spring-bean-life-cycle-project-411x450.png" srcset="/img/loading.gif" lazyload alt="spring bean life cycle example methods"></a></p>
<h3 id="Maven-Dependencies"><a href="#Maven-Dependencies" class="headerlink" title="Maven Dependencies"></a>Maven Dependencies</h3><p>We don’t need to include any extra dependencies for configuring spring bean life cycle methods, our pom.xml file is like any other standard spring maven project.</p>
<pre><code class="hljs">&lt;project xmlns=&quot;https://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;https://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;https://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;org.springframework.samples&lt;/groupId&gt;
  &lt;artifactId&gt;SpringBeanLifeCycle&lt;/artifactId&gt;
  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
  
  &lt;properties&gt;

        &lt;!-- Generic properties --&gt;
        &lt;java.version&gt;1.7&lt;/java.version&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;

        &lt;!-- Spring --&gt;
        &lt;spring-framework.version&gt;4.0.2.RELEASE&lt;/spring-framework.version&gt;

        &lt;!-- Logging --&gt;
        &lt;logback.version&gt;1.0.13&lt;/logback.version&gt;
        &lt;slf4j.version&gt;1.7.5&lt;/slf4j.version&gt;

    &lt;/properties&gt;
    
    &lt;dependencies&gt;
        &lt;!-- Spring and Transactions --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
            &lt;version&gt;$&#123;spring-framework.version&#125;&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;
            &lt;version&gt;$&#123;spring-framework.version&#125;&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!-- Logging with SLF4J &amp; LogBack --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
            &lt;version&gt;$&#123;slf4j.version&#125;&lt;/version&gt;
            &lt;scope&gt;compile&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
            &lt;version&gt;$&#123;logback.version&#125;&lt;/version&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;

    &lt;/dependencies&gt;    
&lt;/project&gt;
</code></pre>
<h3 id="Model-Class"><a href="#Model-Class" class="headerlink" title="Model Class"></a>Model Class</h3><p>Let’s create a simple java bean class that will be used in service classes.</p>
<pre><code class="hljs">package com.journaldev.spring.bean;

public class Employee &#123;

    private String name;

    public String getName() &#123;
        return name;
    &#125;

    public void setName(String name) &#123;
        this.name = name;
    &#125;
    
&#125;
</code></pre>
<h3 id="InitializingBean-DisposableBean"><a href="#InitializingBean-DisposableBean" class="headerlink" title="InitializingBean, DisposableBean"></a>InitializingBean, DisposableBean</h3><p>Let’s create a service class where we will implement both the interfaces for post-init and pre-destroy methods.</p>
<pre><code class="hljs">package com.journaldev.spring.service;

import org.springframework.beans.factory.DisposableBean;
import org.springframework.beans.factory.InitializingBean;

import com.journaldev.spring.bean.Employee;

public class EmployeeService implements InitializingBean, DisposableBean&#123;

    private Employee employee;

    public Employee getEmployee() &#123;
        return employee;
    &#125;

    public void setEmployee(Employee employee) &#123;
        this.employee = employee;
    &#125;
    
    public EmployeeService()&#123;
        System.out.println(&quot;EmployeeService no-args constructor called&quot;);
    &#125;

    @Override
    public void destroy() throws Exception &#123;
        System.out.println(&quot;EmployeeService Closing resources&quot;);
    &#125;

    @Override
    public void afterPropertiesSet() throws Exception &#123;
        System.out.println(&quot;EmployeeService initializing to dummy value&quot;);
        if(employee.getName() == null)&#123;
            employee.setName(&quot;Pankaj&quot;);
        &#125;
    &#125;
&#125;
</code></pre>
<h3 id="Custom-post-init-pre-destroy"><a href="#Custom-post-init-pre-destroy" class="headerlink" title="Custom post-init, pre-destroy"></a>Custom post-init, pre-destroy</h3><p>Since we don’t want our services to have direct spring framework dependency, let’s create another form of Employee Service class where we will have post-init and pre-destroy spring life cycle methods and we will configure them in the spring bean configuration file.</p>
<pre><code class="hljs">package com.journaldev.spring.service;

import com.journaldev.spring.bean.Employee;

public class MyEmployeeService&#123;

    private Employee employee;

    public Employee getEmployee() &#123;
        return employee;
    &#125;

    public void setEmployee(Employee employee) &#123;
        this.employee = employee;
    &#125;
    
    public MyEmployeeService()&#123;
        System.out.println(&quot;MyEmployeeService no-args constructor called&quot;);
    &#125;

    //pre-destroy method
    public void destroy() throws Exception &#123;
        System.out.println(&quot;MyEmployeeService Closing resources&quot;);
    &#125;

    //post-init method
    public void init() throws Exception &#123;
        System.out.println(&quot;MyEmployeeService initializing to dummy value&quot;);
        if(employee.getName() == null)&#123;
            employee.setName(&quot;Pankaj&quot;);
        &#125;
    &#125;
&#125;
</code></pre>
<p>We will look into the spring bean configuration file in a bit. Before that let’s create another service class that will use @PostConstruct and @PreDestroy annotations.</p>
<h3 id="PostConstruct-PreDestroy"><a href="#PostConstruct-PreDestroy" class="headerlink" title="@PostConstruct, @PreDestroy"></a>@PostConstruct, @PreDestroy</h3><p>Below is a simple class that will be configured as spring bean and for post-init and pre-destroy methods, we are using @PostConstruct and @PreDestroy annotations.</p>
<pre><code class="hljs">package com.journaldev.spring.service;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

public class MyService &#123;

    @PostConstruct
    public void init()&#123;
        System.out.println(&quot;MyService init method called&quot;);
    &#125;
    
    public MyService()&#123;
        System.out.println(&quot;MyService no-args constructor called&quot;);
    &#125;
    
    @PreDestroy
    public void destory()&#123;
        System.out.println(&quot;MyService destroy method called&quot;);
    &#125;
&#125;
</code></pre>
<h3 id="Configuration-File"><a href="#Configuration-File" class="headerlink" title="Configuration File"></a>Configuration File</h3><p>Let’s see how we will configure our beans in spring context file.</p>
<pre><code class="hljs">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;https://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;https://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;https://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

&lt;!-- Not initializing employee name variable--&gt;
&lt;bean name=&quot;employee&quot; class=&quot;com.journaldev.spring.bean.Employee&quot; /&gt;

&lt;bean name=&quot;employeeService&quot; class=&quot;com.journaldev.spring.service.EmployeeService&quot;&gt;
    &lt;property name=&quot;employee&quot; ref=&quot;employee&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean name=&quot;myEmployeeService&quot; class=&quot;com.journaldev.spring.service.MyEmployeeService&quot;
        init-method=&quot;init&quot; destroy-method=&quot;destroy&quot;&gt;
    &lt;property name=&quot;employee&quot; ref=&quot;employee&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;!-- initializing CommonAnnotationBeanPostProcessor is same as context:annotation-config --&gt;
&lt;bean class=&quot;org.springframework.context.annotation.CommonAnnotationBeanPostProcessor&quot; /&gt;
&lt;bean name=&quot;myService&quot; class=&quot;com.journaldev.spring.service.MyService&quot; /&gt;
&lt;/beans&gt;
</code></pre>
<p>Notice that I am not initializing employee name in it’s bean definition. Since EmployeeService is using interfaces, we don’t need any special configuration here. For MyEmployeeService bean, we are using init-method and destroy-method attributes to let spring framework know our custom methods to execute. MyService bean configuration doesn’t have anything special, but as you can see that I am enabling annotation based configuration for this. Our application is ready, let’s write a test program to see how different methods get executed.</p>
<h3 id="Test-Program"><a href="#Test-Program" class="headerlink" title="Test Program"></a>Test Program</h3><pre><code class="hljs">package com.journaldev.spring.main;

import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.journaldev.spring.service.EmployeeService;
import com.journaldev.spring.service.MyEmployeeService;

public class SpringMain &#123;

    public static void main(String[] args) &#123;
        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;spring.xml&quot;);

        System.out.println(&quot;Spring Context initialized&quot;);
        
        //MyEmployeeService service = ctx.getBean(&quot;myEmployeeService&quot;, MyEmployeeService.class);
        EmployeeService service = ctx.getBean(&quot;employeeService&quot;, EmployeeService.class);

        System.out.println(&quot;Bean retrieved from Spring Context&quot;);
        
        System.out.println(&quot;Employee Name=&quot;+service.getEmployee().getName());
        
        ctx.close();
        System.out.println(&quot;Spring Context Closed&quot;);
    &#125;

&#125;
</code></pre>
<p>When we run above test program, we get below output.</p>
<pre><code class="hljs">Apr 01, 2014 10:50:50 PM org.springframework.context.support.ClassPathXmlApplicationContext prepareRefresh
INFO: Refreshing org[email protected]c1b9b03: startup date [Tue Apr 01 22:50:50 PDT 2014]; root of context hierarchy
Apr 01, 2014 10:50:50 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [spring.xml]
EmployeeService no-args constructor called
EmployeeService initializing to dummy value
MyEmployeeService no-args constructor called
MyEmployeeService initializing to dummy value
MyService no-args constructor called
MyService init method called
Spring Context initialized
Bean retrieved from Spring Context
Employee Name=Pankaj
Apr 01, 2014 10:50:50 PM org.springframework.context.support.ClassPathXmlApplicationContext doClose
INFO: Closing org[email protected]c1b9b03: startup date [Tue Apr 01 22:50:50 PDT 2014]; root of context hierarchy
MyService destroy method called
MyEmployeeService Closing resources
EmployeeService Closing resources
Spring Context Closed
</code></pre>
<p><strong>Spring Bean Life Cycle Important Points</strong>:</p>
<ul>
<li>  From the console output it’s clear that Spring Context is first using no-args constructor to initialize the bean object and then calling the post-init method.</li>
<li>  The order of bean initialization is same as it’s defined in the spring bean configuration file.</li>
<li>  The context is returned only when all the spring beans are initialized properly with post-init method executions.</li>
<li>  Employee name is printed as “Pankaj” because it was initialized in the post-init method.</li>
<li>  When context is getting closed, beans are destroyed in the reverse order in which they were initialized i.e in LIFO (Last-In-First-Out) order.</li>
</ul>
<p>You can uncomment the code to get bean of type <code>MyEmployeeService</code> and confirm that output will be similar and follow all the points mentioned above.</p>
<h2 id="Spring-Aware-Interfaces"><a href="#Spring-Aware-Interfaces" class="headerlink" title="Spring Aware Interfaces"></a>Spring Aware Interfaces</h2><p>Sometimes we need Spring Framework objects in our beans to perform some operations, for example reading ServletConfig and ServletContext parameters or to know the bean definitions loaded by the ApplicationContext. That’s why spring framework provides a bunch of *Aware interfaces that we can implement in our bean classes. <code>org.springframework.beans.factory.Aware</code> is the root marker interface for all these Aware interfaces. All of the *Aware interfaces are sub-interfaces of Aware and declare a single setter method to be implemented by the bean. Then spring context uses setter-based dependency injection to inject the corresponding objects in the bean and make it available for our use. Spring Aware interfaces are similar to servlet listeners with callback methods and implementing observer design pattern Some of the important Aware interfaces are:</p>
<ul>
<li>  <strong>ApplicationContextAware</strong> - to inject ApplicationContext object, example usage is to get the array of bean definition names.</li>
<li>  <strong>BeanFactoryAware</strong> - to inject BeanFactory object, example usage is to check scope of a bean.</li>
<li>  <strong>BeanNameAware</strong> - to know the bean name defined in the configuration file.</li>
<li>  <strong>ResourceLoaderAware</strong> - to inject ResourceLoader object, example usage is to get the input stream for a file in the classpath.</li>
<li>  <strong>ServletContextAware</strong> - to inject ServletContext object in MVC application, example usage is to read context parameters and attributes.</li>
<li>  <strong>ServletConfigAware</strong> - to inject ServletConfig object in MVC application, example usage is to get servlet config parameters.</li>
</ul>
<p>Let’s see these Aware interfaces usage in action by implementing few of them in a class that we will configure as spring bean.</p>
<pre><code class="hljs">package com.journaldev.spring.service;

import java.util.Arrays;

import org.springframework.beans.BeansException;
import org.springframework.beans.factory.BeanClassLoaderAware;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.BeanFactoryAware;
import org.springframework.beans.factory.BeanNameAware;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.context.ApplicationEventPublisher;
import org.springframework.context.ApplicationEventPublisherAware;
import org.springframework.context.EnvironmentAware;
import org.springframework.context.ResourceLoaderAware;
import org.springframework.context.annotation.ImportAware;
import org.springframework.core.env.Environment;
import org.springframework.core.io.Resource;
import org.springframework.core.io.ResourceLoader;
import org.springframework.core.type.AnnotationMetadata;

public class MyAwareService implements ApplicationContextAware,
        ApplicationEventPublisherAware, BeanClassLoaderAware, BeanFactoryAware,
        BeanNameAware, EnvironmentAware, ImportAware, ResourceLoaderAware &#123;

    @Override
    public void setApplicationContext(ApplicationContext ctx)
            throws BeansException &#123;
        System.out.println(&quot;setApplicationContext called&quot;);
        System.out.println(&quot;setApplicationContext:: Bean Definition Names=&quot;
                + Arrays.toString(ctx.getBeanDefinitionNames()));
    &#125;

    @Override
    public void setBeanName(String beanName) &#123;
        System.out.println(&quot;setBeanName called&quot;);
        System.out.println(&quot;setBeanName:: Bean Name defined in context=&quot;
                + beanName);
    &#125;

    @Override
    public void setBeanClassLoader(ClassLoader classLoader) &#123;
        System.out.println(&quot;setBeanClassLoader called&quot;);
        System.out.println(&quot;setBeanClassLoader:: ClassLoader Name=&quot;
                + classLoader.getClass().getName());
    &#125;

    @Override
    public void setResourceLoader(ResourceLoader resourceLoader) &#123;
        System.out.println(&quot;setResourceLoader called&quot;);
        Resource resource = resourceLoader.getResource(&quot;classpath:spring.xml&quot;);
        System.out.println(&quot;setResourceLoader:: Resource File Name=&quot;
                + resource.getFilename());
    &#125;

    @Override
    public void setImportMetadata(AnnotationMetadata annotationMetadata) &#123;
        System.out.println(&quot;setImportMetadata called&quot;);
    &#125;

    @Override
    public void setEnvironment(Environment env) &#123;
        System.out.println(&quot;setEnvironment called&quot;);
    &#125;

    @Override
    public void setBeanFactory(BeanFactory beanFactory) throws BeansException &#123;
        System.out.println(&quot;setBeanFactory called&quot;);
        System.out.println(&quot;setBeanFactory:: employee bean singleton=&quot;
                + beanFactory.isSingleton(&quot;employee&quot;));
    &#125;

    @Override
    public void setApplicationEventPublisher(
            ApplicationEventPublisher applicationEventPublisher) &#123;
        System.out.println(&quot;setApplicationEventPublisher called&quot;);
    &#125;

&#125;
</code></pre>
<h3 id="Spring-Aware-Example-Configuration-File"><a href="#Spring-Aware-Example-Configuration-File" class="headerlink" title="Spring *Aware Example Configuration File"></a>Spring *Aware Example Configuration File</h3><p>Very simple spring bean configuration file.</p>
<pre><code class="hljs">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;https://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;https://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;https://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

&lt;bean name=&quot;employee&quot; class=&quot;com.journaldev.spring.bean.Employee&quot; /&gt;

&lt;bean name=&quot;myAwareService&quot; class=&quot;com.journaldev.spring.service.MyAwareService&quot; /&gt;

&lt;/beans&gt;
</code></pre>
<h3 id="Spring-Aware-Test-Program"><a href="#Spring-Aware-Test-Program" class="headerlink" title="Spring *Aware Test Program"></a>Spring *Aware Test Program</h3><pre><code class="hljs">package com.journaldev.spring.main;

import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.journaldev.spring.service.MyAwareService;

public class SpringAwareMain &#123;

    public static void main(String[] args) &#123;
        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;spring-aware.xml&quot;);

        ctx.getBean(&quot;myAwareService&quot;, MyAwareService.class);
        
        ctx.close();
    &#125;

&#125;
</code></pre>
<p>Now when we execute above class, we get following output.</p>
<pre><code class="hljs">Apr 01, 2014 11:27:05 PM org.springframework.context.support.ClassPathXmlApplicationContext prepareRefresh
INFO: Refreshing org[email protected]60a2f435: startup date [Tue Apr 01 23:27:05 PDT 2014]; root of context hierarchy
Apr 01, 2014 11:27:05 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [spring-aware.xml]
setBeanName called
setBeanName:: Bean Name defined in context=myAwareService
setBeanClassLoader called
setBeanClassLoader:: ClassLoader Name=sun.misc.Launcher$AppClassLoader
setBeanFactory called
setBeanFactory:: employee bean singleton=true
setEnvironment called
setResourceLoader called
setResourceLoader:: Resource File Name=spring.xml
setApplicationEventPublisher called
setApplicationContext called
setApplicationContext:: Bean Definition Names=[employee, myAwareService]
Apr 01, 2014 11:27:05 PM org.springframework.context.support.ClassPathXmlApplicationContext doClose
INFO: Closing org[email protected]60a2f435: startup date [Tue Apr 01 23:27:05 PDT 2014]; root of context hierarchy
</code></pre>
<p>Console output of the test program is simple to understand, I won’t go into much detail about that. That’s all for the Spring Bean Life Cycle methods and injecting framework specific objects into the spring beans. Please download sample project from below link and analyze it to learn more about them.</p>
<p><a target="_blank" rel="noopener" href="https://journaldev.nyc3.digitaloceanspaces.com/spring/SpringBeanLifeCycle.zip">Download Spring Bean Lifycycle Project</a></p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul>
<li><a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/spring-bean-life-cycle">Spring Bean Life Cycle</a></li>
</ul>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/IT/" class="category-chain-item">IT</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/spring/">#spring</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>SpringBeanLifeCycle</div>
      <div>https://baymax55.github.io/2022/10/17/spring/SpringBeanLifeCycle/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>baymax55</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年10月17日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/10/17/spring/Springboot%E5%90%AF%E5%8A%A8%E6%89%A9%E5%B1%95%E7%82%B9%E8%B6%85%E8%AF%A6%E7%BB%86%E6%80%BB%E7%BB%93/" title="Springboot启动扩展点超详细总结">
                        <span class="hidden-mobile">Springboot启动扩展点超详细总结</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.4.16/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"eHrEoB5dKeqkOQe92av9bqEs-MdYXbMMI","appKey":"ldBS29kjWy4gjD9MCWKAWxyi","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"https://ehreob5d.api.lncldglobal.com","emojiCDN":null,"emojiMaps":null,"enableQQ":true},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访问客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  
    
  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/leancloud.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
